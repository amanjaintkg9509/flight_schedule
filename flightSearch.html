<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flight Search Engine</title>
</head>
<body>

<link rel="stylesheet" href="css/style.css" />
<link rel="stylesheet" href="css/slider.css" />
<h1 style="color: green;">Flight Search Engine</h1>
<table border="1">
    <tr>
        <td class="searchTab">
            <table border="1">
                <tr>
                    <td>
                        <div class="tab">
                            <button class="tablinks" onclick="openCity(event, 'one_way')">One Way</button>
                            <button class="tablinks" onclick="openCity(event, 'return')">Return</button>
                        </div>
                            <p>
                                <input type="text" id="origin_city_name" onkeyup="filterNames(event)" placeholder="Enter Origin City">
                                <select class="list-container" id ="list-container" onchange="origin_select(event)">
                                </select>
                            </p>
                            <p>
                                <input type="text" id="dest_city_name" onkeyup="filterNames1(event)" placeholder="Enter Destination City">
                                <select class="list-container" id ="list-container1" onchange="dest_select(event)">
                                </select>
                            </p>
                            <div id="one_way" class="tabcontent">
                                <h3> One way</h3>
                                
                                <label>Departure Date</label>
                                <p>
                                    <input type="date" placeholder="Departure Date" id="r_d_date1">
                                </p>
                                <!-- <label>Return Date</label>
                                <p>
                                    <input type="date" placeholder="Return Date">
                                </p> -->
                                <p>
                                    <select aria-placeholder="Passengers">
                                        <option>Passengers</option>
                                        <option>1</option>
                                        <option>2</option>
                                        <option>3</option>
                                    </select>
                                </p>
                                <p>
                                    <button id="submit_form">Search</button>
                                </p>
                            </div>

                            <div id="return" class="tabcontent">
                                <h3> Return</h3>
                                <form id="myForm">
                                <label>Departure Date</label>
                                <p>
                                    <input type="date" placeholder="Departure Date" id="r_d_date">
                                </p>
                                <label>Return Date</label>
                                <p>
                                    <input type="date" placeholder="Return Date" id="r_r_date">
                                </p>
                                <p>
                                    <select aria-placeholder="Passengers" id="no_passenger">
                                        <option>Passengers</option>
                                        <option>1</option>
                                        <option>2</option>
                                        <option>3</option>
                                    </select>
                                </p>
                                </form>
                                <p>
                                    <button id="submit_form">Search</button>
                                </p>
                            </div>
                    </td>
                </tr>
                <tr>
                    <td>
                        <div>
                            <div class="slidecontainer">
                                <h3>Refine flight search</h3>
                                <b>0 - <span id="priceMaxRange"></span></b>
                                <input type="range" min="200" max="10000" step="200" value="4000" class="slider" id="myRange">
                            </div>
                        </div>
                    </td>
                </tr>
            </table>

        </td>
        <td>
            <table border="1">
                <tr>
                    <td style="height: 83px;">
                        <b><span id="address"></span></b>
                        <span class="side-right">
                            <span id="depart_hide">Depart : <span id="depart_date"> 1st Jan 2021</span><br/></span>
                            <span id="return_hide">Return : <span id="return_date"> 10th Jan 2021</span></span>
                        </span>
                    </td>
                </tr>
                <tr>
                    <td>
                        <div class="card">
                            <div class="container">
                                <h2><b>Rs. 9.500.00</b></h2>
                                <hr/>
                                <div class="row">
                                    <div class="col-sm-6">
                                        <p><small>AI-202</small></p>
                                        <p>PNQ > DEL</p> 
                                        <span>Depart: 10.00 AM</span><br/> 
                                        <span>Arrive: 12.00 PM</span> 
                                    </div>
                                    <div class="col-sm-6">
                                        <p><small>AI-203</small></p>
                                        <p>DEL > PNQ</p> 
                                        <span>Depart: 10.00 AM</span><br/> 
                                        <span>Arrive: 12.00 PM</span>  
                                    </div>
                                    <div class="col-sm-6 side-right">
                                        <img src="https://homepages.cae.wisc.edu/~ece533/images/airplane.png" height="100px" width="230px"/>
                                        <button class="block">Book This Flight</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="card">
                            <div class="container">
                                <h2><b>Rs. 9.500.00</b></h2>
                                <hr/>
                                <div class="row">
                                    <div class="col-sm-6">
                                        <p><small>AI-202</small></p>
                                        <p>PNQ > DEL</p> 
                                        <span>Depart: 10.00 AM</span><br/> 
                                        <span>Arrive: 12.00 PM</span> 
                                    </div>
                                    <div class="col-sm-6">
                                        <p><small>AI-203</small></p>
                                        <p>DEL > PNQ</p> 
                                        <span>Depart: 10.00 AM</span><br/> 
                                        <span>Arrive: 12.00 PM</span>   
                                    </div>
                                    <div class="col-sm-6 side-right">
                                        <img src="https://homepages.cae.wisc.edu/~ece533/images/airplane.png" height="100px" width="230px"/>
                                        <button class="block">Book This Flight</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script src="json/cities.json"></script>
<script>

    function dest_select(e){
        document.getElementById('dest_city_name').value = e.target.value;
    }

    function origin_select(e){
        document.getElementById('origin_city_name').value = e.target.value;
    }

    var submit_button = $('#submit_form');

    submit_button.click(function() {
        var r_d_date = $('#r_d_date').val();
        var r_d_date1 = $('#r_d_date1').val();
        var r_r_date = $('#r_r_date').val();
        var origin_city = $( "#list-container option:selected" ).val();
        var destination_city = $( "#list-container1 option:selected" ).val();

        if(r_r_date){
            document.getElementById("address").innerHTML = origin_city +' > '+ destination_city +' > '+ origin_city;
        }else
            document.getElementById("address").innerHTML = origin_city +' > '+ destination_city;
        console.log(origin_city,destination_city);

        if(r_d_date){
            document.getElementById("depart_hide").setAttribute("style", "display: block;")
            document.getElementById("depart_date").innerHTML = r_d_date; 
        }else
            document.getElementById("depart_hide").setAttribute("style", "display: none;")

        if(r_d_date1){
            document.getElementById("depart_hide").setAttribute("style", "display: block;")
            document.getElementById("depart_date").innerHTML = r_d_date1; 
        }else
            document.getElementById("depart_hide").setAttribute("style", "display: none;")


        if(r_r_date){
            document.getElementById("return_hide").setAttribute("style", "display: block;")
            document.getElementById("return_date").innerHTML = r_r_date; 
        }else
            document.getElementById("return_hide").setAttribute("style", "display: none;")
        // console.log($('#r_r_date').val(),'===========');
    });
    function openCity(evt, cityName) {
    var i, tabcontent, tablinks;
    tabcontent = document.getElementsByClassName("tabcontent");
    for (i = 0; i < tabcontent.length; i++) {
        tabcontent[i].style.display = "none";
    }
    tablinks = document.getElementsByClassName("tablinks");
    for (i = 0; i < tablinks.length; i++) {
        tablinks[i].className = tablinks[i].className.replace(" active", "");
    }
    document.getElementById(cityName).style.display = "block";
    // evt.currentTarget.className += " active";
}

var slider = document.getElementById("myRange");
var output = document.getElementById("priceMaxRange");
output.innerHTML = slider.value; // Display the default slider value

// Update the current slider value (each time you drag the slider handle)
slider.oninput = function () {
    output.innerHTML = this.value;
}


$(document).ready(function () {
    document.getElementById("list-container").setAttribute("style", "display: none;")
    document.getElementById("list-container1").setAttribute("style", "display: none;")
    document.getElementById("depart_hide").setAttribute("style", "display: none;")
    document.getElementById("return_hide").setAttribute("style", "display: none;")
})

const names = [
    {
        "code": "ATL",
        "city": "Atlanta GA",
        "country": "US"
    },
    {
        "code": "PEK",
        "city": "Beijing",
        "country": "CN"
    },
    {
        "code": "LHR",
        "city": "London",
        "country": "GB"
    },
    {
        "code": "ORD",
        "city": "Chicago IL",
        "country": "US"
    },
    {
        "code": "HND",
        "city": "Tokyo",
        "country": "JP"
    },
    {
        "code": "LAX",
        "city": "Los Angeles CA",
        "country": "US"
    },
    {
        "code": "CDG",
        "city": "Paris",
        "country": "FR"
    },
    {
        "code": "DFW",
        "city": "Dallas/Fort Worth TX",
        "country": "US"
    }
  ];
  
  function renderNames(arrayOfNames) {
    let liElemet = "";
    for (let i = 0; i < arrayOfNames.length; i++) {
      liElemet += `<option value="${arrayOfNames[i].code}">${arrayOfNames[i].city}</option>`;
    }
    document.getElementById("list-container").innerHTML = liElemet;
  }
  
  renderNames(names);
  
  filterNames=(event) => {
    var searchvalue = event.target.value;
    if(searchvalue.length > 0){
        document.getElementById("list-container").setAttribute("style", "display: block;")
    }else{
        document.getElementById("list-container").setAttribute("style", "display: none;")
    }
    var filterNames = names.filter((v, i) => {
      return v.city.includes(searchvalue);
    });
    renderNames(filterNames);
  }

 
  function renderNames1(arrayOfNames) {
    let liElemet = "";
    for (let i = 0; i < arrayOfNames.length; i++) {
      liElemet += `<option value="${arrayOfNames[i].code}">${arrayOfNames[i].city}</option>`;
    }
    document.getElementById("list-container1").innerHTML = liElemet;
  }
  
  renderNames1(names);
  
  filterNames1=(event) => {
    var searchvalue = event.target.value;
    if(searchvalue.length > 0){
        document.getElementById("list-container1").setAttribute("style", "display: block;")
    }else{
        document.getElementById("list-container1").setAttribute("style", "display: none;")
    }
    var filterNames = names.filter((v, i) => {
      return v.city.includes(searchvalue);
    });
    renderNames1(filterNames);
  }
</script>
</body>
</html>